<!DOCTYPE html>
<html lang="en">
  <head>
    
<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>


<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />









  <link rel="alternate" href="/atom.xml" title="Shell32">




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=2.3.x" />



<link rel="canonical" href="http://blog.xiadong.info/page/41/"/>


<meta property="og:type" content="website">
<meta property="og:title" content="Shell32">
<meta property="og:url" content="http://blog.xiadong.info/page/41/index.html">
<meta property="og:site_name" content="Shell32">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Shell32">
<meta name="twitter:card" content="summary">


<link rel="stylesheet" type="text/css" href="/css/style.css?v=2.3.x" />



  <link rel="stylesheet" type="text/css" href="/lib/fancybox/jquery.fancybox.css" />





<script>
  var CONFIG = {
    search: false,
    searchPath: "/search.xml",
    fancybox: true,
    toc: true,
  }
</script>




  

  <script type="text/javascript">
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-97442160-1', 'auto');
        ga('send', 'pageview');
  </script>




<script src="https://use.typekit.net/tqr0ojg.js"></script>
<script>try{Typekit.load({ async: true });}catch(e){}</script>

    <title> Shell32 </title>
  <meta name="generator" content="Hexo 4.2.1"></head>

  <body><div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/." class="logo">Shell32</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>

<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    
      <a href="/">
        <li class="mobile-menu-item">
          
          
            Home
          
        </li>
      </a>
    
      <a href="/archives/">
        <li class="mobile-menu-item">
          
          
            Archives
          
        </li>
      </a>
    
      <a href="/tags">
        <li class="mobile-menu-item">
          
          
            Tags
          
        </li>
      </a>
    
      <a href="/categories">
        <li class="mobile-menu-item">
          
          
            Categories
          
        </li>
      </a>
    
      <a href="/about">
        <li class="mobile-menu-item">
          
          
            About
          
        </li>
      </a>
    
      <a href="https://cse.google.com/cse/publicurl?cx=007205548471419455342:wndla_xl_3e" target="_blank" rel="noopener">
        <li class="mobile-menu-item">
          
          
            Search
          
        </li>
      </a>
    
  </ul>
</nav>

    <div class="container" id="mobile-panel">
      <header id="header" class="header"><div class="logo-wrapper">
  <a href="/." class="logo">Shell32</a>
</div>

<nav class="site-navbar">
  
    <ul id="menu" class="menu">
      
        <li class="menu-item">
          <a class="menu-item-link" href="/">
            
            
              Home
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/archives/">
            
            
              Archives
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/tags">
            
            
              Tags
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/categories">
            
            
              Categories
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/about">
            
            
              About
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="https://cse.google.com/cse/publicurl?cx=007205548471419455342:wndla_xl_3e" target="_blank" rel="noopener">
            
            
              Search
            
          </a>
        </li>
      
      
    </ul>
  
</nav>

      </header>

      <main id="main" class="main">
        <div class="content-wrapper">
          <div id="content" class="content">
            
  <section id="posts" class="posts">
    
      
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          <a class="post-link" href="/2016/04/21/%E5%9C%A8qt%E4%B8%AD%E4%BD%BF%E7%94%A8botan%E5%BA%93%E8%BF%9B%E8%A1%8C%E5%8A%A0%E8%A7%A3%E5%AF%86/">在Qt中使用Botan库进行加解密</a>
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          Apr 21, 2016
        </span>
      </div>
    </header>

    
    

    <div class="post-content">
      
        
        

        
          <h1 id="在qt中使用botan库进行加解密">在Qt中使用Botan库进行加解密</h1>
<p>在毕设项目中需要使用RSA和AES加解密, 因为Qt自带Botan库, 所以使用Botan库来实现. Botan项目网站<a href="http://botan.randombit.net" target="_blank" rel="noopener">http://botan.randombit.net</a></p>
<h2 id="在项目中使用">在项目中使用</h2>
<p>因为Qt Creator自带Botan库, 所以很容易就可在Qt项目中使用. 首先到Qt Creator的Github页面<a href="https://github.com/qtproject/qt-creator" target="_blank" rel="noopener">https://github.com/qtproject/qt-creator</a>, 找到<code>qt-creator/src/libs/3rdparty/botan/</code>目录, 下载其中的文件. 然后在项目的pro文件中使用<code>include(botan/botan.pri)</code>引入Botan的源代码.</p>
<h2 id="rsa加解密">RSA加解密</h2>
<p>引入头文件
#include “botan/botan.h”</p>
<p>生成密钥对</p>
<pre><code>Botan::AutoSeeded_RNG rng;
Botan::RSA_PrivateKey privateKey(rng, 1024);
</code></pre>
<p>输出密钥</p>
<pre><code>qDebug() &lt;&lt; Botan::X509::PEM_encode(privateKey).c_str() &lt;&lt; Botan::PKCS8::PEM_encode(privateKey).c_str();
</code></pre>
<p>对字符串加密</p>
<pre><code>Botan::PK_Encryptor_EME enc(privateKey, &quot;EME1(SHA-256)&quot;);
char msg[] = &quot;Test&quot;;
Botan::SecureVector&lt;Botan::byte&gt; en = enc.encrypt(msg, 6, rng);
</code></pre>
<p>解密</p>
<pre><code>Botan::PK_Decryptor_EME dec(privateKey, &quot;EME1(SHA-256)&quot;);
Botan::SecureVector&lt;Botan::byte&gt; re = dec.decrypt(en);
</code></pre>

        
      
    </div>

    

    

  </article>

    
      
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          <a class="post-link" href="/2016/03/16/windows%E5%B9%B3%E5%8F%B0poppler-qt5%E9%A2%84%E7%BC%96%E8%AF%91%E5%BA%93/">Windows平台poppler-qt5预编译库</a>
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          Mar 16, 2016
        </span>
      </div>
    </header>

    
    

    <div class="post-content">
      
        
        

        
          <p>项目中要对PDF文件进行预览, 搜索与Qt搭配的库之后选择poppler库, 官网地址: <a href="https://poppler.freedesktop.org/" target="_blank" rel="noopener">https://poppler.freedesktop.org/</a>, 没有找到win32平台的二进制文件, 所以只能下载源码自行编译, 由于依赖库众多, 经常报莫名其妙的编译错误, 在耗费了十几个小时后终于编译出了可用的dll文件, 在Qt工程中使用正常. 为了备份和方便后来人, 提供编译好的poppler-qt5的库下载.</p>
<p><strong>poppler版本:</strong></p>
<p>0.41.0</p>
<p><strong>编译器</strong></p>
<ul>
<li>gcc 5.1.0 32-bit</li>
<li>mingw32-make GNU make 3.82.90</li>
</ul>
<p><strong>目录结构</strong></p>
<pre><code>libpoppler.zip
|
|--bin
|   |--freetype6.dll
|   |--jpeg62.dll
|   |--libpoppler.dll
|   |--libpoppler-qt5.dll
|   |--libtiff3.dll
|   |--openjpeg.dll
|   |--pdfinfo.exe
|   |--zlib1.dll
|
|--include
|   |--poppler
|       |--qt5
|           |--poppler-annotation.h
|           |--poppler-export.h
|           |--poppler-form.h
|           |--poppler-link.h
|           |--poppler-media.h
|           |--poppler-optcontent.h
|           |--poppler-page-transition.h
|           |--poppler-qt5.h
|
|--lib
    |--libpoppler.dll.a
    |--libpoppler-qt5.dll.a
</code></pre>
<p><strong>下载地址:</strong></p>
<p>Google Drive: <a href="https://drive.google.com/open?id=0BzmeJgHvo4mIV1V1bW9zd2pRaWs" target="_blank" rel="noopener">https://drive.google.com/open?id=0BzmeJgHvo4mIV1V1bW9zd2pRaWs</a></p>
<p>百度云: <a href="http://pan.baidu.com/s/1jHlxTOU" target="_blank" rel="noopener">http://pan.baidu.com/s/1jHlxTOU</a></p>

        
      
    </div>

    

    

  </article>

    
      
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          <a class="post-link" href="/2016/01/02/c++qt%E6%93%8D%E4%BD%9Cword%E6%A8%A1%E7%89%88%E5%9F%BA%E7%A1%80/">C++&Qt操作Word模版基础</a>
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          Jan 2, 2016
        </span>
      </div>
    </header>

    
    

    <div class="post-content">
      
        
        

        
          <p>项目中要对Word模版进行操作, 使用C++&amp;Qt进行开发, 将学到的东西记录如下.</p>
<h2 id="0-参考链接">0 参考链接</h2>
<ol>
<li>
<p><a href="https://en.wikipedia.org/wiki/OLE_Automation" target="_blank" rel="noopener">https://en.wikipedia.org/wiki/OLE_Automation</a></p>
</li>
<li>
<p><a href="http://www.cgoakley.org/prog/oleaut.html" target="_blank" rel="noopener">http://www.cgoakley.org/prog/oleaut.html</a></p>
</li>
<li>
<p><a href="https://zh.wikipedia.org/wiki/ActiveX" target="_blank" rel="noopener">https://zh.wikipedia.org/wiki/ActiveX</a></p>
</li>
<li>
<p><a href="http://www.oschina.net/question/1243014_120926" target="_blank" rel="noopener">http://www.oschina.net/question/1243014_120926</a></p>
</li>
<li>
<p><a href="http://blog.csdn.net/csxiaoshui/article/details/47333989" target="_blank" rel="noopener">http://blog.csdn.net/csxiaoshui/article/details/47333989</a></p>
</li>
</ol>
<h2 id="1-基础知识">1 基础知识</h2>
<h3 id="1-1-ole-automation">1.1 OLE Automation</h3>
<p>在Windows应用开发中, OLE Automation是一种进程间通信机制. 它基于COM和MFC, 因此在我的项目中并不适用.<a href="https://en.wikipedia.org/wiki/OLE_Automation" target="_blank" rel="noopener">[1]</a><a href="http://www.cgoakley.org/prog/oleaut.html" target="_blank" rel="noopener">[2]</a></p>
<blockquote>
<p>OLE（Object Linking and Embedding，对象链接与嵌入），是能让应用程序创建包含不同来源的复合文档的一项技术。OLE不仅是桌面应用程序集成，而且还定义和实现了一种允许应用程序作为软件“对象”（数据集合和操作数据的函数）彼此进行“链接”的机制，这种链接机制和协议称为部件对象模型(Component Object Model),简称COM。OLE可以用来创建复合文档，复合文档包含了创建于不同源应用程序，有着不同类型的数据，因此它可以把文字、声音、图像、表格、应用程序等组合在一起。</p>
</blockquote>
<h3 id="1-2-activex">1.2 ActiveX</h3>
<p>根据Wikipedia<a href="https://zh.wikipedia.org/wiki/ActiveX" target="_blank" rel="noopener">[3]</a>, ActiveX的含义是:</p>
<blockquote>
<p>ActiveX在广义上是指微软公司的整个COM架构，但是现在通常用来称呼基于标准COM接口来实现对象链接与嵌入（OLE）的ActiveX控件。[1]后者是指从VBX发展而来的，面向微软的Internet Explorer技术而设计的以OCX为扩展名的OLE控件。通过定义容器和组件之间的接口规范，如果编写了一个遵循规范的控件，那么可以很方便地在多种容器中使用而不用修改控件的代码。同样，通过实现标准接口调用，一个遵循规范的容器可以很容易地嵌入任何遵循规范的控件。由于OLE在ActiveX控件中的应用的普及，现在OLE技术中只有少数独立于ActiveX技术，例如复合文档。</p>
</blockquote>
<h2 id="2-qt中的activex-5">2 Qt中的ActiveX<a href="http://blog.csdn.net/csxiaoshui/article/details/47333989" target="_blank" rel="noopener">[5]</a></h2>
<p>Qt中提供QtActiveX模块来支持ActiveX, 有两种开发方式:</p>
<ol>
<li>将已有的COM或者ActiveX空间引入到Qt的应用程序中</li>
<li>将Qt应用程序或者Qt的对象导出成COM对象或者ActiveX控件供他人使用</li>
</ol>
<p>Qt是通过两个模块来支持上述所说的两种方式的:</p>
<ol>
<li>使用QAxContainer模块, 通过QAxObject和QAxWidget分别支持COM对象和ActiveX控件的开发, 可以通过这两个对象将外部的COM或者ActiveX组件接入到Qt应用程序.</li>
<li>使用QAxServer模块, 通过QAxAggregated, QAxBindable和QAxFactory类, 通过了进程内和可执行程序exe两种方式的COM Server模式, 用来将Qt写的内容导出为COM或者ActiveX供他人使用.</li>
</ol>
<h2 id="3-qt中使用activex-4">3 Qt中使用ActiveX<a href="http://www.oschina.net/question/1243014_120926" target="_blank" rel="noopener">[4]</a></h2>
<p>Qt版本5.4.2, 编译器: MinGW 4.9.1 32-bit.</p>
<h3 id="3-1-准备工作">3.1 准备工作</h3>
<p>创建一个Word模版, 插入一个表格和三个书签: pos1, pos2, pos3. 保存为Doc1.dot.</p>
<p><img src="https://lh3.googleusercontent.com/-Vh0Ca5Homwc/VofF7M2vCwI/AAAAAAAAD0M/BazOwEELCWwZjizGLApPj9JHnXGzQARrACCo/s800/20160102200655.png" alt=""></p>
<h3 id="3-2-在项目的-pro文件中增加如下一行">3.2 在项目的.pro文件中增加如下一行</h3>
<pre><code>QT   += axcontainer`&lt;/pre&gt;
</code></pre>
<h3 id="3-3-新建qt项目-输入如下代码">3.3 新建Qt项目,输入如下代码:</h3>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"mainwindow.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QApplication&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QAxWidget&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QAxObject&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="function">QApplication <span class="title">a</span><span class="params">(argc, argv)</span></span>;</span><br><span class="line">  MainWindow w;</span><br><span class="line">  w.show();</span><br><span class="line"></span><br><span class="line">  <span class="comment">//新建一个word应用程序</span></span><br><span class="line">  QAxWidget *<span class="keyword">word</span> = <span class="keyword">new</span> QAxWidget(<span class="string">"Word.Application"</span>, <span class="number">0</span>, Qt::MSWindowsOwnDC);</span><br><span class="line">  <span class="comment">//设置为不可见</span></span><br><span class="line">  <span class="keyword">word</span>-&gt;setProperty(<span class="string">"Visible"</span>, <span class="literal">false</span>);</span><br><span class="line">  <span class="comment">//获取所有工作文档</span></span><br><span class="line">  QAxObject *docs = <span class="keyword">word</span>-&gt;querySubObject(<span class="string">"Documents"</span>);</span><br><span class="line">  <span class="comment">//新建一个文档</span></span><br><span class="line">  docs-&gt;dynamicCall(<span class="string">"Add(QString)"</span>, QString::fromLocal8Bit(<span class="string">"E:\\Study\\Design\\WordTempTest\\Doc1.dot"</span>));</span><br><span class="line">  <span class="comment">//获取激活文档</span></span><br><span class="line">  QAxObject *activeDoc = <span class="keyword">word</span>-&gt;querySubObject(<span class="string">"ActiveDocument"</span>);</span><br><span class="line">  <span class="comment">//获取pos1标签</span></span><br><span class="line">  QAxObject *bookmarkPos1 = activeDoc-&gt;querySubObject(<span class="string">"Bookmarks(QVariant)"</span>, <span class="string">"pos1"</span>);</span><br><span class="line">  <span class="comment">//选中并插入字符</span></span><br><span class="line">  <span class="keyword">if</span>(!bookmarkPos1-&gt;isNull())&#123;</span><br><span class="line">    bookmarkPos1-&gt;dynamicCall(<span class="string">"Select(void)"</span>);</span><br><span class="line">    bookmarkPos1-&gt;querySubObject(<span class="string">"Range"</span>)-&gt;setProperty(<span class="string">"Text"</span>, <span class="string">"pos1"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//获取pos2标签</span></span><br><span class="line">  QAxObject *bookmarkPos2 = activeDoc-&gt;querySubObject(<span class="string">"Bookmarks(QVariant)"</span>, <span class="string">"pos2"</span>);</span><br><span class="line">  <span class="comment">//选中并插入字符</span></span><br><span class="line">  <span class="keyword">if</span>(!bookmarkPos2-&gt;isNull())&#123;</span><br><span class="line">    bookmarkPos2-&gt;dynamicCall(<span class="string">"Select(void)"</span>);</span><br><span class="line">    bookmarkPos2-&gt;querySubObject(<span class="string">"Range"</span>)-&gt;setProperty(<span class="string">"Text"</span>, <span class="string">"pos2"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//获取pos3标签</span></span><br><span class="line">  QAxObject *bookmarkPos3 = activeDoc-&gt;querySubObject(<span class="string">"Bookmarks(QVariant)"</span>, <span class="string">"pos3"</span>);</span><br><span class="line">  <span class="comment">//选中并插入字符</span></span><br><span class="line">  <span class="keyword">if</span>(!bookmarkPos3-&gt;isNull())&#123;</span><br><span class="line">    bookmarkPos3-&gt;dynamicCall(<span class="string">"Select(void)"</span>);</span><br><span class="line">    bookmarkPos3-&gt;querySubObject(<span class="string">"Range"</span>)-&gt;setProperty(<span class="string">"Text"</span>, <span class="string">"pos3"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//文档另存为Doc1.doc</span></span><br><span class="line">  activeDoc-&gt;dynamicCall(<span class="string">"SaveAs (const QString&amp;)"</span>, QString(<span class="string">"E:\\Study\\Design\\WordTempTest\\Doc1.doc"</span>));</span><br><span class="line">  activeDoc-&gt;dynamicCall(<span class="string">"Close (boolean)"</span>, <span class="literal">false</span>);</span><br><span class="line">  <span class="keyword">word</span>-&gt;dynamicCall(<span class="string">"Quit()"</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> a.exec();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="3-4-运行结果">3.4 运行结果</h2>
<p>程序运行后Doc1.doc文件的内容:</p>
<p><img src="https://lh3.googleusercontent.com/-dAT5kINBxfQ/VofF7O-Oo7I/AAAAAAAAA18/iiKZDWcC8wo/s800-Ic42/20160102204208.png" alt=""></p>

        
      
    </div>

    

    

  </article>

    
      
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          <a class="post-link" href="/2015/12/30/windows-10-%E8%87%AA%E5%8A%A8%E9%94%81%E5%B1%8F%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/">Windows 10 自动锁屏问题解决</a>
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          Dec 30, 2015
        </span>
      </div>
    </header>

    
    

    <div class="post-content">
      
        
        

        
          <h2 id="问题">问题</h2>
<p>升级到Windows10以后我遇到的各种小毛病不少，比如中文输入法失灵，锁屏无法显示幻灯片还有这次要说的自动锁屏问题。前两个问题基本上都已经解决了，但是这个自动锁屏的问题却还是顽固地出现。</p>
<p>具体的症状表现就是每半小时就会自动锁屏，无论在干什么都是这样。不过幸好这个问题不是一直不停地出现，一般都是在睡眠唤醒之后半小时出现一次，虽然很烦但是对于我这样的懒人还不是无法忍受。可是今天这种情况反复不停出现，每半小时一次，所以我不得不想办法把它彻底解决了。</p>
<h2 id="问题原因"><s>问题原因</s></h2>
<p><strong>晚上这个问题又出现了，所以这并不是直接原因</strong></p>
<p><s>由于是精确的每半小时出现一次，所以我就到事件查看器里看看到底是出了什么状况。很容易就找到了相应的事件：</s>
<img src="http://7xkh37.com1.z0.glb.clouddn.com/20151230141322.png" alt="">
<s>所对应的具体信息为：</s></p>
<blockquote>
<p><s>应用程序-特定 权限设置并未向在应用程序容器 不可用 SID (不可用)中运行的地址 LocalHost (使用 LRPC) 中的用户 NT AUTHORITY\SYSTEM SID (S-1-5-18)授予针对 CLSID 为 {D63B10C5-BB46-4990-A94F-E40B9D520160}、APPID 为 {9CA88EE3-ACB7-47C8-AFC4-AB702511C276}</s></p>
</blockquote>
<h2 id="解决方案"><s>解决方案</s></h2>
<p><strong>同样这也不是解决方法</strong></p>
<p><s>Google之后，根据<a href="http://www.lxway.com/458800126.htm" target="_blank" rel="noopener">这篇文章</a>所描述的方法设置了权限之后重启，问题解决。</s></p>
<h2 id="可能的其他原因">可能的其他原因</h2>
<p>根据MS Community的这篇帖子(<a href="http://answers.microsoft.com/en-us/windows/forum/windows_10-security/windows-10-auto-locks-every-30-minutes-even-when/b53e7ff7-7644-4d51-8038-62f8f2eb9a26" target="_blank" rel="noopener">http://answers.microsoft.com/en-us/windows/forum/windows_10-security/windows-10-auto-locks-every-30-minutes-even-when/b53e7ff7-7644-4d51-8038-62f8f2eb9a26</a>)，可能的原因是由于锁屏幻灯片导致的，而我的锁屏幻灯片也确实是有问题的，按照帖子的说法把锁屏幻灯片关掉就好，可是我并不想关，所以我先把<strong>设置-&gt;个性化-&gt;锁屏界面-&gt;高级幻灯片放映设置-&gt;自动关闭屏幕</strong>设置为不自动关闭（因为这里原来设置为30分钟，跟锁屏的频率吻合）。接下来就要看看还会不会出现同样的问题了。</p>

        
      
    </div>

    

    

  </article>

    
      
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          <a class="post-link" href="/2015/04/17/2015%E8%85%BE%E8%AE%AF%E5%AE%9E%E4%B9%A0%E7%AC%94%E8%AF%95%E9%9D%A2%E8%AF%95offer/">2015腾讯实习笔试+面试+offer</a>
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          Apr 17, 2015
        </span>
      </div>
    </header>

    
    

    <div class="post-content">
      
        
        

        
          <p>本来我是已经决定要保研，但是这个学期还是投了一些实习简历，主要是想看一下我的水平到底如何，顺便也能感受一下找工作的感觉。寒假快要结束的时候给阿里投了内推，在寒假的最后一天接到电面，面试过程相当坑爹，我基本是裸面，结果是毫无悬念的跪了。来到学校之后又尝试着投了腾讯和阿里的正式校招，也参加了微软的在线笔试（到现在都没有动静估计也是没戏了）。上个星期腾讯面试完，今天拿到offer，简单记录一下腾讯实习的面试经历。</p>
<h2 id="笔试">笔试</h2>
<p>笔试在电子科大在郫县的校区进行，人数还是不少了，占用了不少阶梯教室。基本上所有报技术职位的都使用一张笔试试卷，很长的一张，正反一共十面，不过有大概三分之一是各个事业群的介绍。有20（还是25道？）选择题（都是不定项选择题），和四道简答题。总体来说难度不是很小，考察了js，C/C++，计算机网络，数据库，运维和一些概率统计方面的问题。我感觉至少有一半的题目不确定，印象比较深刻的知识点有字节对齐，基类有虚函数的派生类的大小等等。。。记忆已经有些模糊了。大题第一题是存储了很多很多QQ号的vector、set和map其中的两个（= =我已经记不清了），删除其中是奇数的QQ号，写算法。第二题是经典的斐波那契数列问题。第三题和第四题已经忘记了，只记得做了第三题，第四题和第一题一样是空白。</p>
<h2 id="一面">一面</h2>
<p>笔试似乎刷人不多，跟我一起笔试的同学基本都进入面试了。面试是在成都的明宇尚雅饭店进行，就在锦江边上，4月7号晚上发短信要第二天早上11点面试。</p>
<p>第二天早上先坐67路再转地铁到华西坝站，出地铁站走几百米就到了。到那里发现人还是很多的，大概是一面的人比较多的缘故，还遇到了CJW君去霸面（而且还霸面成功了。。。）。签到之后等了没几分钟就让去楼上面试。面试官是一个瘦瘦的眼镜小哥。主要问的问题有</p>
<ul>
<li>结构体字节对齐(<a href="http://www.cnblogs.com/clover-toeic/p/3853132.html" target="_blank" rel="noopener">C语言字节对齐问题详解</a>)</li>
<li>要求不对齐有哪些方法</li>
<li>异构网络中怎么解决不同主机对齐不同的问题（没答出来）</li>
<li>C可变参数(<a href="http://blog.csdn.net/jackystudio/article/details/17523523" target="_blank" rel="noopener">【C++基础之二十】可变参数的函数</a>)</li>
<li>笛卡尔积（数据库）</li>
<li>左右连接</li>
<li>tcp建立拆除(三次和四次握手，这问题几乎是必问，阿里问了，后面的二面也问了)</li>
<li>md5冲突（md5重复的问题）</li>
<li>实习地点、时间</li>
<li>C++只问了会不会没有具体问</li>
</ul>
<p>一共大概二十多分钟就出来了，没有要求写代码。</p>
<h2 id="还是一面">还是一面。。。</h2>
<p>我自认为第一次面试回答的还是不错的，只有一个没答出来。可是回学校的时候一查。。。岗位不合适。。。= =#，结合后面的面试经历我猜测面试官一开始就没打算让我进微信事业群（我报的微信事业群后台开发），基本没有问什么有实际意义的东西。</p>
<p>到了晚上十一点多的时候又接到短信，再去初试（一面），看来是换了个部门。第二天下午6点半又到了饭店，这次等待面试的地方人明显少了很多（这个时候一面已经基本结束了）。这次直接到顶楼，面试官年纪比上一个要大一些。上来没有自我介绍，先问我会啥，我说C/C<ins>比较熟，于是就问：“说一说C</ins>的多态吧”。C++这方面的东西还是前几天恶补的，只能硬着头皮扯。扯到了动态绑定、虚函数等等，然后面试官问虚函数的继承是怎么实现的，有什么意义。我只说出来了虚函数表。。。又问为什么基类的析构函数一般都是虚函数，这个我是看过的，可是一下子想不起来。。。这个话题结束了。。。下一个问题是new和malloc的区别，这个我还有点印象；然后问到堆与栈的区别；静态变量存储在哪个区域。这些都答上来了。然后问到从数据库中读取了很多联系人数据，在内存中用什么数据结构来管理，要求搜索，排序，添加删除都比较快，数组添加删除太慢，链表搜索排序慢，最后我也只扯出来了平衡二叉搜索树这种，本来想说B+树可是实在不熟。接下来是三个数据结构题：</p>
<ul>
<li>两个单向链表可能相交也可能不相交，求相交的节点（暴力遍历不行）</li>
<li>一个字符串中单词顺序反转（反转两次）</li>
<li>交换单链表的相邻两个节点（这个要手写代码，前面两个讲思路）</li>
</ul>
<p>这三个题答得都还不错。面试官说可以进入复试，然后我问了一下现在面的是什么部门，结果是SNG（社交网络事业群）的移动客户端。。。就是手机QQ、QQ空间等。然后面试结束，让我明天早上来复试。</p>
<h2 id="二面">二面</h2>
<p>坐电梯刚到一楼接到面试官的电话，说我现在就可以去二面，于是又坐电梯上去。这次的面试官气场有点强。。。先问了问项目经历、成绩等等。然后开始写代码，先是经典的上台阶问题，然后要求实现strlen，我只考虑了空指针的问题，然后用遍历来求长度，然后面试官问怎么优化。。我是没想出来（回来之后才知道要优化一要分配寄存器，二要考虑字节对齐）；然后是一个很长的字符串，求第一个只出现了一次的字符。接下来问了一个智力题：两个外观大小重量都完全相同的金球和铅球在不破坏它们的情况下怎么区分开。。。我一开始想的是硬度，可是这被认为破坏了，然后是导电性，被说不好操作，其他的我也没想出来。最后问了数据库的问题，谈到了项目中用的框架，于是又聊到了框架对SQL的封装等等。。。最后得到的评价是还不错，但是项目经验太少。</p>
<h2 id="hr面">HR面</h2>
<p>二面之后我基本确定能进HR面了。HR面没有技术问题，问了籍贯、家庭背景、爱好、对成都怎么看、能不能去深圳实习等等问题。HR小哥明显跟前面的技术面试官不一样，也热情的多。</p>
<h2 id="offer">offer</h2>
<p>一个星期后接到电话说拿到了实习名额，但是啊。。但是，考虑再三还是决定保研为重，学院还要求必须七月去实训，时间也不够还是决定拒掉实习offer了。下个月的阿里面试估计也不会再去了。。。</p>
<h2 id="总结">总结</h2>
<p>校招时对于本科生的技术要求不是太高，面对面的面试中也不太可能出现复杂的问题，时间上也来不及，所以问的问题多集中在语言的特性（对语言的熟练程度）和数据结构上。还有简历不要乱写，写在上面的每一条都有可能被刨根问底，不是很熟悉的项目还是不要写为妙。我都没有敢说对Python比较熟，因为我只是用它但是却没有极其深入的研究，随随便便就能被问倒。</p>
<p>重点还是在计算机专业的核心科目上：C/C++，计算机网络，数据结构与算法、操作系统和数据库等。</p>
<p>说实话能拿到实习offer还是很幸运的，我的水平还是不够啊。。。</p>

        
      
    </div>

    

    

  </article>

    
      
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          <a class="post-link" href="/2015/03/13/%E4%BD%BF%E7%94%A8%E5%BE%AE%E8%BD%AF%E7%9A%84%E5%85%8D%E8%B4%B9git%E6%9C%8D%E5%8A%A1/">使用微软的免费Git服务</a>
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          Mar 13, 2015
        </span>
      </div>
    </header>

    
    

    <div class="post-content">
      
        
        

        
          <p>Github上的软件仓库必须公开，今天找了一下免费的私人Git，找到了bitbucket和Visual Studio Online。权衡了一下还是选择了微软的。<a href="www.visualstudio.com" title="www.visualstudio.com">www.visualstudio.com</a></p>

        
      
    </div>

    

    

  </article>

    
      
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          <a class="post-link" href="/2015/01/01/year2015/">year=2015</a>
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          Jan 1, 2015
        </span>
      </div>
    </header>

    
    

    <div class="post-content">
      
        
        

        
          <p>2014又过去了，感觉上很快，但是又好像经历了很多事情。从大二到大三，说不上什么巨大的变化，但是为什么却让我觉得这一年中充斥着许许多多的事情呢？而且很多事情仿佛才过去没有多久而已。</p>
<p>年初的时候，那就是大二上的期末考试吧，当时是怎么考的，考了什么竟然印象全无。甚至寒假的时候在家里干了什么也没有印象呢。嗯，只记得大概练了一些题吧，然后就糊里糊涂的来了学校。然后四月份大创立项，不过也是直到暑假之前都没有怎么动手。还有参加蓝桥杯的省赛，拿了一个省一等奖，这也算是我现在为止最高的奖了吧。象ACM那样的团队比赛我似乎总是卡在“没有队友”这一点，是因为不善交际吗。。不过我的身边似乎也没有能和我一起去学习的人。班里的其他几位学霸除了上课也没有什么交集。所以我从上大学开始学习的路上就一直是一个人呢。</p>
<p>五月，我又真正的再次回到孤独一人的状态。很对不起，让你在这一年多的时间里忍受我的愚钝和低情商，现在真的只希望你能快乐的继续走下去。</p>
<p>暑假的前夕，在学校上着小学期的时候竟然入了二次元这个坑。说起来真的是很幸运，否则我真的还找不到什么学习和写程序以外的爱好了。记得以前在知乎看到一个答案，说人需要一种类似“能量”的东西，外向的人通过和他人接触从他人那里获得“能量”；而内向的人却可以自己产生这种“能量”，所以他们没有什么与别人打交道的欲望。对于这个观点我还是比较赞同的，像我这样对于和他人接触没有什么兴趣的人却可以从代码、小说或者动漫中获得满足。不知道喜欢幻想世界的人是不是都有逃避现实的倾向，但是幻想中的美好世界确实比现实中这个更有吸引力。</p>
<p>暑假基本都在学车，真的很坑，每天都相当累，而且科目二训练了接近二十天，从不会到会又到了不会。不过好在科目二通过了，一个月的辛苦没有全白费。暑假里面把自己的大创项目开了个头，这个项目全部都是我自己一个来完成，说实话我对于我校计算机专业的学生的平均水平基本已经不抱什么希望了。</p>
<p>下半年开始的一个月把项目差不多赶完了，虽然还是很粗糙但是总算所有功能都完成了。而且通过这个项目和上个学期研究开发实践的项目我对于WEB开发的流程和基本功能的开发已经比较熟悉了，前端后端都能写，怎么说也是向着所谓“Full Stack”发展吧:-)。</p>
<p>接下来就是日复一日的上课、学习。这学期我倒是把睡眠调整了过来，十一点之后睡觉，八点之前就能起来，算是一个好习惯吧。就这样一直到了期末，让我说这个学期学到了什么呢？嗯貌似除了课堂上学习的网络、数据库、软件工程还真没有学到什么。不过这些课都是程序员的安身立命之本，也不算荒废吧。</p>
<p>2015年又要到了一个人生的十字路口了，工作/保研该怎么选择我还没有下定决心。在我的意识之中现在的IT界对于本科以上学历的高低的区别已经不大了，在校园中学到的东西在工作中能用到多少还是个问题。但是看着互联网尤其是移动互联网的疯狂发展，我总是觉得有点担忧，如果国内的互联网产业真的有泡沫，那么如果一旦破了，普通程序员就是最先遭殃的一部分人。而且看着国内IT业界一片纷纷扰扰的乱象总是不像是有着多模巨大的发展潜力，我只看到了互相倾轧，各种口水战，无下限的营销手段，把普通用户当作待宰的羔羊。我如果明年就结束校园生活，那么这种环境我又能发展的什么地步呢？我真的没有信心。</p>
<p>现在我越来越感到自己相比于其他更优秀的人的差距，要说什么突出的技能，傲人的奖项、出众的科研能力我都没有，我拿什么去竞争呢？前几天看到中山大学超算冬令营的通知，看到要学术讨论，有论文或者科研项目，我深深的觉得我差的还太多，没有怎么接触过科研，也就无从谈起什么科研能力。我现在会的只不过是基础中的基础而已，距离优秀还远得很，而且有那么多比我努力的多的人。</p>
<p>现在的计划大概是先参加保研夏令营，看看能不能拿到名额，如果可以的话就继续读研究生。如果没有理想的大学就还是去找工作吧。上半年的时候尝试一下BAT或者外企的实习。</p>
<p>2014年的末尾时我又一次的感觉到了这个国家的寒意。政府对于“墙”的不断加强已经让我感到前方的黑暗。2014年一系列的打击海外文化的举措，一遍遍的用政治力强行控制人民已经让我彻底的失望了，执政者的想法总是向着更坏的方向发展。希望有朝一日能够走出这堵墙，这是我现在最大的愿望了吧。</p>

        
      
    </div>

    

    

  </article>

    
      
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          <a class="post-link" href="/2014/12/19/zip%E6%96%87%E4%BB%B6%E5%90%8D%E4%B9%B1%E7%A0%81%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/">zip文件名乱码的解决方法</a>
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          Dec 19, 2014
        </span>
      </div>
    </header>

    
    

    <div class="post-content">
      
        
        

        
          <p>在Mac下压缩的ZIP文件在Windows下用WinRAR或者7-ZIP打开都会产生文件名乱码的问题。</p>
<p>网上的办法都是在Mac下从新打包。今天突然找到了一个压缩软件<a href="http://www.bandisoft.com/bandizip/cn/" target="_blank" rel="noopener">Bandizip</a>，可以打开Unicode编码的文件名，乱码问题彻底解决。</p>

        
      
    </div>

    

    

  </article>

    
      
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          <a class="post-link" href="/2014/11/19/%E6%9D%82%E8%AE%B0%E2%80%94%E2%80%94%E6%88%91%E5%B0%B1%E6%98%AF%E8%A6%81%E5%90%90%E6%A7%BDWindows/">杂记——我就是要吐槽Windows</a>
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          Nov 19, 2014
        </span>
      </div>
    </header>

    
    

    <div class="post-content">
      
        
        

        
          <p>这几天微软因为.Net开源的原因又搞出了个“大新闻”，知乎上也是一片喊着Java可以去死了的声音，但是作为一个微软粉转路人，昨天折腾了我一下午的事情简直让我想变成一生黑。</p>
<p>事情是这样的：上个周末的时候看着又要告急万里江山一片红的C盘，想着还是去卸载一些东西吧，于是遵从微软的教导，打开控制面板－程序－卸载程序，结果看来看去发现实在没有什么可以卸载的，于是打算拿从来没有用过的SQL Server下手。不要问我为什么装它，装VS的时候貌似是默认的，亦或者我没有把它勾掉。说实话我知道VS是一个优秀的IDE，但是我仍然对它没有什么好感，过于臃肿，要不是课程要用到我才不会装呢。不论如何，我是打算拿SQL Server开刀了，列表中列出了大概六到七个相关的组件，嗯，挨个卸载吧。开头两个点击卸载后提示依赖于另一个程序，要先卸载另一个，好，你说先卸载就先卸载，结果依赖的程序点击卸载后卸载出错，出错就出错吧，也不少见了，但是可气的是只告诉我出错又不告诉我哪里出错，要是移动设备什么的也就算了，告诉用户出错原因用户可能也束手无策。但是作为桌面操作系统，就不能告诉我到底哪里错了吗？这个问题后面再讨论，还是继续我的卸载之旅吧。既然正常的卸载方法卸载不掉，那就只能用非常手段了，于是祭出Installer Clean Up，这是微软官方的用于删除msi安装包的工具，虽然很久没有更新了，但是在删除一些极其顽固的软件的时候还是很有用的（没错，Office，说的就是你）。找到要卸载的软件后点Clean，继续坑爹，删除进程卡住了，这是一个命令行工具，主要是扫描注册表和系统文件再执行删除，但是它运行到一半的时候卡住了。看来这个办法也行不通了，作为一个轻度强迫症患者，我想卸载却无法卸载简直就是折磨，于是一通Google，在微软官网找到了官方卸载修复工具，down下来之后总算是把SQL Server删除了。但是这却引起了更严重的问题，Office 2013每次打开的时候都要进行一次配置，当时我还没有在意，以为是没有重启导致的，结果昨天重启之后还是这个样子，这简直可以把强迫症逼疯好麻！！结果在尝试了修改注册表等方法无果后，还是痛下决心决定重装Office（昨天是要做明天答辩的PPT的，这个时候决定重装需要多大的决心你造吗？）这中间又出了多么坑爹的注册表权限问题我就不提了，安装完Office 2013 SP1后打补丁吧，我不说要打三个G的Office补丁了，但是你有两个跟Office和SQL Server没半毛钱关系的补丁出现未知错误是怎么回事？我已经不想吐槽了，又花了大半个晚上的时间才把这两个补丁装上。</p>
<p>微软是一家伟大的公司，它的产品技术也是世界顶级的，但是作为一个长年Windows用户（其实是没钱买不起Mac，呵呵说多了都是泪）实在不觉得Windows是个优秀的产品，它为了兼容性和市场份额而背负了太多的包袱。而且Windows作为一个操作系统本身的复杂程度就已经非常高，谁也不能保证不出问题，但是它总是会出一些莫名奇妙的问题我就无法理解了。如果是第三方软件出问题还可以辩解说是第三方软件的问题，但是微软自家产品出的问题也不少，比如我每次要重装Office的时候都几乎必然会出问题（注册表是重灾区），还经常有上文这样无法卸载的东西，甚至用官方的东西卸载后导致其他部分出问题，一个人生病，全家卧床不起。你可以说我本来就不应该去卸载SQL Server，一个软件连最基本的卸载都搞不定我还怎么对它有好感？</p>
<p>大概Windows认为大多数用户无法自己解决问题，所以出错提示都相当简短，最多有个错误号，即使到系统日志里看到了具体的错误一般也是个程序的返回码，比如我最后安装那两个补丁时报的错，还有这周在网络实验室的Server 2008 R2上添加活动区域的时候，都是告诉用户错了，但是具体哪里错了我就是不告诉你，其实系统也不知道到底哪里错了，它只从程序那里得到一个错误码而已。没有很深的专业知识和经验想要查出问题在哪简直是不可能。而且因为Win的开放度和兼容性导致Win的目录结构常常变的极其混乱，这个时候出问题大多数人还是重装了事吧。</p>
<p>昨天在遇到最后的更新问题时，在微软的官方论坛上列出的方法有十几种之多，几乎大半要求重启，作为一个普通用户我觉得这种建议是毫无意义的，因为太过于麻烦，可操作性差，全部尝试也不一定能解决问题，原因还是错误原因千奇百怪，根本原因呢？怕还是在Windows自己身上。什么时候Windows对软件的限制多一些，强硬一些，把自家大型软件的耦合性降低一些（比如VS做成插件模式就很好，不会像现在这样臃肿，当然我只是在闲扯），那么Windows的体验还能上升一个台阶。</p>
<p> </p>
<p> </p>

        
      
    </div>

    

    

  </article>

    
      
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          <a class="post-link" href="/2014/11/08/pythonopencv%E5%9B%BE%E5%83%8F%E7%9B%B4%E6%96%B9%E5%9B%BE%E5%9D%87%E8%A1%A1%E5%8C%96%E5%A4%84%E7%90%86/">Python+OpenCV图像直方图均衡化处理</a>
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          Nov 8, 2014
        </span>
      </div>
    </header>

    
    

    <div class="post-content">
      
        
        

        
          <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#coding=utf-8</span></span><br><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> numpy</span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> <span class="string">u"图片为同目录下的test.jpg，先显示原图的灰度直方图，关闭后显示变换后的直方图，再关闭显示变换后的图片"</span>.encode(<span class="string">"gbk"</span>)</span><br><span class="line"></span><br><span class="line">img = cv2.imread(<span class="string">'test.jpg'</span>,<span class="number">0</span>)</span><br><span class="line">rows,cols = img.shape</span><br><span class="line"></span><br><span class="line">grey_img = numpy.zeros((<span class="number">256</span>,<span class="number">256</span>),numpy.uint8)</span><br><span class="line"></span><br><span class="line">hist= cv2.calcHist([img], [<span class="number">0</span>], <span class="literal">None</span>, [<span class="number">256</span>], [<span class="number">0.0</span>,<span class="number">255.0</span>])</span><br><span class="line">minVal, maxVal, minLoc, maxLoc = cv2.minMaxLoc(hist)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> h <span class="keyword">in</span> range(<span class="number">256</span>):</span><br><span class="line">    intensity = int(hist[h]*<span class="number">256</span>/maxVal)</span><br><span class="line">    cv2.line(grey_img,(h,<span class="number">256</span>), (h,<span class="number">256</span>-intensity),(<span class="number">255</span>,<span class="number">255</span>,<span class="number">255</span>))</span><br><span class="line"></span><br><span class="line">cv2.imshow(<span class="string">u"原灰度图"</span>.encode(<span class="string">'gbk'</span>), grey_img)</span><br><span class="line">cv2.waitKey (<span class="number">0</span>)</span><br><span class="line">cv2.destroyAllWindows()</span><br><span class="line"></span><br><span class="line">grey_img_arr = []</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> hist:</span><br><span class="line">    grey_img_arr.append(int(i[<span class="number">0</span>]))</span><br><span class="line"></span><br><span class="line">grey_img_arr_2 = [grey_img_arr[<span class="number">0</span>]]</span><br><span class="line"></span><br><span class="line">grey_img_arr_3 = []</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">256</span>):</span><br><span class="line">    grey_img_arr_2.append(grey_img_arr_2[i<span class="number">-1</span>] + grey_img_arr[i])</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> grey_img_arr_2:</span><br><span class="line">    a = (i/<span class="number">921600.0</span>)/(<span class="number">1.0</span>/<span class="number">255.0</span>)</span><br><span class="line">    <span class="keyword">if</span> a-int(a) &gt; <span class="number">0.5</span>:</span><br><span class="line">        grey_img_arr_3.append(int(a)+<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        grey_img_arr_3.append(int(a))</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(len(grey_img_arr_2)):</span><br><span class="line">    grey_img_arr_2[i] = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(rows):</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> range(cols):</span><br><span class="line">        img[i,j] = grey_img_arr_3[img[i,j]]</span><br><span class="line"></span><br><span class="line">hist= cv2.calcHist([img], [<span class="number">0</span>], <span class="literal">None</span>, [<span class="number">256</span>], [<span class="number">0.0</span>,<span class="number">255.0</span>])</span><br><span class="line">minVal, maxVal, minLoc, maxLoc = cv2.minMaxLoc(hist)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> h <span class="keyword">in</span> range(<span class="number">256</span>):</span><br><span class="line">    intensity = int(hist[h]*<span class="number">256</span>/maxVal)</span><br><span class="line">    cv2.line(grey_img,(h,<span class="number">256</span>), (h,<span class="number">256</span>-intensity),(<span class="number">255</span>,<span class="number">255</span>,<span class="number">255</span>))</span><br><span class="line"></span><br><span class="line">cv2.imshow(<span class="string">u"变换过的直方图图"</span>.encode(<span class="string">'gbk'</span>),grey_img)</span><br><span class="line">cv2.waitKey (<span class="number">0</span>)</span><br><span class="line">cv2.destroyAllWindows()</span><br><span class="line"></span><br><span class="line">cv2.imshow(<span class="string">u"变换过的图片"</span>.encode(<span class="string">'gbk'</span>),img)</span><br><span class="line">cv2.waitKey (<span class="number">0</span>)</span><br><span class="line">cv2.destroyAllWindows()</span><br></pre></td></tr></table></figure>
        
      
    </div>

    

    

  </article>

    
  </section>

  
  <nav class="pagination">
    
      <a class="prev" href="/page/40/">
        <i class="iconfont icon-left"></i>
        <span class="prev-text">Prev</span>
      </a>
    
    
      <a class="next" href="/page/42/">
        <span class="next-text">Next</span>
        <i class="iconfont icon-right"></i>
      </a>
    
  </nav>


          </div>
          

        </div>  
      </main>

      <footer id="footer" class="footer">

  <div class="social-links">
    
      
        
          <a href="mailto:xiadong.main@gmail.com" class="iconfont icon-email" title="email"></a>
        
      
    
      
    
      
    
      
        
          <a href="https://www.facebook.com/xiadong1994" target="_blank" rel="noopener" class="iconfont icon-facebook" title="facebook"></a>
        
      
    
      
        
          <a href="https://www.linkedin.com/in/dong-xia" target="_blank" rel="noopener" class="iconfont icon-linkedin" title="linkedin"></a>
        
      
    
      
    
      
        
          <a href="https://github.com/Shell32-Natsu" target="_blank" rel="noopener" class="iconfont icon-github" title="github"></a>
        
      
    
      
    
      
    
      
    
    
    
      <a href="/atom.xml" class="iconfont icon-rss" title="rss"></a>
    
  </div>



<div class="friend-links">
    <span>Links:&nbsp;</span>
    
        <a href="https://wf94.github.io/" target="_blank" rel="noopener" class="friend-links-item">打满鸡血来刷题</a>
    
        <a href="http://tianyuh.com/" target="_blank" rel="noopener" class="friend-links-item">塞外麾下炙</a>
    
</div>


<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>
  </span>
  
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/ahonn/hexo-theme-even" target="_blank" rel="noopener">Even</a>
  </span>

  <span class="copyright-year">
    
    &copy; 
     
      2014 - 
    
    2021

    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">Shell32</span>
  </span>
</div>

      </footer>

      <div class="back-to-top" id="back-to-top">
        <i class="iconfont icon-up"></i>
      </div>
    </div>

    


    
  





  
    <script type="text/javascript" src="/lib/jquery/jquery-3.1.1.min.js"></script>
  

  
    <script type="text/javascript" src="/lib/slideout/slideout.js"></script>
  

  
    <script type="text/javascript" src="/lib/fancybox/jquery.fancybox.pack.js"></script>
  


    <script type="text/javascript" src="/js/src/even.js?v=2.3.x"></script>
<script type="text/javascript" src="/js/src/bootstrap.js?v=2.3.x"></script>
<script type="text/javascript">
$(function(){
    const imgs = $("img").filter(function() {
        return this.src.match(/.*\.sinaimg\.cn\/.*/);
    });
    for (let i = 0; i < imgs.length; i++) {
        let img = imgs[i];
        $(img).attr('referrerpolicy', 'no-referrer');
    }
    console.log(`Removed referrer header for ${imgs.length} sina weibo images.`);
});
</script>
    
    <!-- Go to www.addthis.com/dashboard to customize your tools --> <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-58f2179bf0859c32"></script> 
  </body>
</html>
